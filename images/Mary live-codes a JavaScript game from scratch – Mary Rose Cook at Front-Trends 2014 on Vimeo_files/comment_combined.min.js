!function(){"use strict";var a=new Class({comment_forms:[],initialize:function(a){var b=this;b.createElements(a),b.attachEvents()},createElements:function(a){var b=this,c=a.get("id");b.comment=a,b.comment_id=c.replace("comment_",""),b.comment_text=a.getElement(".js-comment_text"),b.replies=$$("."+b.element_id),b.edit_trigger=a.getElement(".js-edit_trigger"),b.create_case_trigger=a.getElement(".js-create_case_trigger"),b.delete_trigger=a.getElement(".js-delete_trigger"),b.permalink_trigger=a.getElement(".js-permalink_trigger"),b.spam_trigger=a.getElement(".js-spam_trigger"),b.edit_container=a.getElement(".js-edit_container"),b.edit_container&&(b.edit_form=new CommentForm({action:"edit",comment_id:b.comment_id,container:b.edit_container,is_sticky:b.comment.hasClass("sticky")?1:0}),b.comment_forms.push(b.edit_form)),b.delete_container=a.getElement(".js-delete_container"),b.delete_container&&(b.delete_form=new CommentForm({action:"delete",comment_id:b.comment_id,container:b.delete_container,is_sticky:b.comment.hasClass("sticky")?1:0}),b.comment_forms.push(b.delete_form))},attachEvents:function(){var a=this;a.bound_events={edit_click:a.onTriggerClick.bind(a,a.edit_form),delete_click:a.onTriggerClick.bind(a,a.delete_form),cancel_click:a.onCancelClick.bind(a),permalink_click:a.onPermalinkClick.bind(a)},a.edit_trigger&&a.edit_trigger.addEvent("click",a.bound_events.edit_click),a.delete_trigger&&a.delete_trigger.addEvent("click",a.bound_events.delete_click),a.permalink_trigger&&a.permalink_trigger.addEvent("click",a.bound_events.permalink_click),a.comment.addEvent("click:relay(.cancel)",a.bound_events.cancel_click),Signal.comments.form_submitted.add(a.onFormSubmitted.bind(a))},openTool:function(a){var b=this;a.open(),Signal.comments.tool.opened.dispatch({module:b})},closeTool:function(a){var b=this;b.comment_text.show(),a.close(),Signal.comments.tool.closed.dispatch({})},onTriggerClick:function(a){var b=this;b.comment_text.isDisplayed()?b.openTool(a):b.closeTool(a)},onCancelClick:function(a){this.comment_text.show(),Signal.comments.tool.closed.dispatch({})},onPermalinkClick:function(a){var b=window.location.hash.toString().match(/^#?\/?[0-9]+/);null!==b&&(a.stop(),Global.smoothScroll($(a.target).get("href"),null,{set_hash:!0,full_href:!0}))},onFormSubmitted:function(a){var b=this;if(a.comment_id===b.comment_id)switch(a.action){case"edit":b.comment.set("html",a.elements),b.refresh(),Signal.comments.tool.closed.dispatch({});break;case"delete":b.destroy(),Signal.comments.deleted.dispatch({comment:b.comment}),Signal.comments.tool.closed.dispatch({})}},destroy:function(){var a=this;a.edit_trigger&&(a.edit_trigger.removeEvent("click",a.bound_events.edit_click),a.edit_form.destroy()),a.create_case_trigger&&(a.create_case_trigger.removeEvent("click",a.bound_events.create_case_click),a.create_case_form.destroy()),a.delete_trigger&&(a.delete_trigger.removeEvent("click",a.bound_events.delete_click),a.delete_form.destroy()),a.permalink_trigger&&a.permalink_trigger.removeEvent("click",a.bound_events.permalink_click),a.spam_trigger&&a.spam_trigger.removeEvent("click",a.bound_events.spam_click),a.comment.removeEvent("click:relay(.cancel)",a.bound_events.cancel_click)},refresh:function(){var a=this;a.destroy(),a.comment_forms=[],a.createElements(a.comment),a.attachEvents(),"undefined"!=typeof Rainbow&&Rainbow.color()},close:function(){var a=this;a.comment_forms.each(function(a){a.close()}),a.comment_text.show()}});window.Comment=a}(),function(){"use strict";var a=new Class({Implements:[Options],options:{action:null,comment_id:null,container:null,is_sticky:0,success_callback:null},initialize:function(a){var b=this;b.setOptions(a),b.createElements(a),b.createRequests(),b.attachEvents()},createElements:function(a){var b=this;b.container=a.container},createRequests:function(){var a=this;a.get_form=new Request.HTML({url:document.location.href,method:"get",update:a.container,data:{comment_id:a.options.comment_id,is_sticky:a.options.is_sticky,action:"comment_"+a.options.action+"_form"},onSuccess:a.onGetFormSuccess.bind(a)})},attachEvents:function(){var a=this;a.bound_events={cancel_click:a.onCancelClick.bind(a),comment_code_toggle_click:a.onCommentCodeToggleClick.bind(a)},a.container.addEvent("click:relay(.cancel)",a.bound_events.cancel_click)},handleFormElements:function(){var a=this;a.comment_macros=a.container.getElement(".js-forum_macro"),a.comment_text=a.container.getElement("textarea"),a.bound_events.comment_macros_change=a.onCommentMacrosChange.bind(a),a.comment_macros&&a.comment_macros.addEvent("click",a.bound_events.comment_macros_change)},onGetFormSuccess:function(){var a=this;a.form=a.container.getElement("form"),a.form_validator=new Form.Validator(a.form),a.form_request=new Form.Request(a.form,null,{extraData:{token:vimeo.xsrft,version:Global.getVersion(),group_id:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[1]:null,context_id:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[1]:null,context_type:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[0]:null},onSuccess:a.onFormSubmitSuccess.bind(a),onFailure:a.onFormSubmitFailure.bind(a)}),a.bound_events.comment_macros_change=a.onCommentMacrosChange.bind(a),a.form.addEvent("change:relay(.js-forum_macro)",a.bound_events.comment_macros_change),a.open()},onFormSubmitSuccess:function(a,b,c,d){var e=this;e.options.success_callback&&e.options.success_callback(c,d),e.form.reset(),e.form_validator.reset(),Signal.comments.form_submitted.dispatch({action:e.options.action,elements:d,comment_id:e.options.comment_id})},onFormSubmitFailure:function(a){var b=this;Signal.comments.action_failed.dispatch({xhr:a,form:b.form})},onCommentCodeToggleClick:function(a){var b=this;b.comment_code.toggle(),b.comment_code_toggle.toggle(),b.form.getElement("textarea[name=code]").focus()},onCancelClick:function(){this.close()},onCommentMacrosChange:function(a,b){var c=this,d=b.get("value"),e=c.form.getElement("textarea"),f=e.get("value");f&&d?f+="\n\n"+d:d&&(f=d),e.set("value",f)},createCodeFormElements:function(){var a=this;a.comment_code_toggle=a.form.getElement(".js-comment_code_toggle"),a.comment_code=a.form.getElement(".js-comment_code_form")},attachCodeFormEvents:function(){var a=this;a.comment_code_toggle&&a.comment_code_toggle.addEvent("click",a.bound_events.comment_code_toggle_click)},open:function(){var a,b=this;b.form?(b.container.removeClass("hide"),a=b.form.getElement("textarea"),b.createCodeFormElements(),b.attachCodeFormEvents(),a&&a.focus()):b.get_form.send()},close:function(){this.container.addClass("hide")},destroy:function(){var a=this;a.container.removeEvent("click:relay(.cancel)",a.bound_events.cancel_click),a.form&&a.form.removeEvent("change:relay(.js-forum_macro)",a.bound_events.comment_macros_change),a.comment_code_toggle&&a.comment_code_toggle.removeEvent("click",a.bound_events.comment_code_toggle_click)}});window.CommentForm=a}(),function(){"use strict";var a=new Class({initialize:function(a){var b=this;b.createElements(a),b.createRequests(),b.attachEvents()},createElements:function(a){var b=this;b.comment_form=a,b.comment_container=b.comment_form.getElement(".js-form_container"),b.comment_toggle=b.comment_form.getElement(".js-comment_toggle"),b.comment_guidelines_toggle=b.comment_form.getElement(".js-guidelines_toggle"),b.comment_guidelines=b.comment_form.getElement(".js-guidelines"),b.comment_macros=b.comment_form.getElement(".js-forum_macro"),b.comment_text=b.comment_form.getElement("textarea"),b.comment_code_toggle=b.comment_form.getElement(".js-comment_code_toggle"),b.comment_code=b.comment_form.getElement(".js-comment_code_form"),b.comment_code_text=b.comment_form.getElement("textarea[name=code]")},createRequests:function(){var a=this;a.comment_form_request=new Form.Request(a.comment_form,null,{extraData:{version:Global.getVersion(),token:vimeo.xsrft,group_id:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[1]:null,context_id:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[1]:null,context_type:vimeo.config&&vimeo.config.context?vimeo.config.context.split(":")[0]:null},onSuccess:a.onAddCommentSuccess.bind(a),onFailure:a.onAddCommentFailure.bind(a)}),a.comment_form_validator=new Form.Validator(a.comment_form)},attachEvents:function(){var a=this;a.bound_events={comment_toggle_click:a.onCommentToggleClick.bind(a),guideline_toggle_click:a.onCommentGuidelinesToggleClick.bind(a),comment_code_toggle_click:a.onCommentCodeToggleClick.bind(a),comment_macros_change:a.onCommentMacrosChange.bind(a)},a.comment_toggle&&a.comment_toggle.addEvent("click",a.bound_events.comment_toggle_click),a.comment_guidelines_toggle&&a.comment_guidelines_toggle.addEvent("click",a.bound_events.guideline_toggle_click),a.comment_code_toggle&&a.comment_code_toggle.addEvent("click",a.bound_events.comment_code_toggle_click),a.comment_macros&&a.comment_macros.addEvent("change",a.bound_events.comment_macros_change)},onAddCommentSuccess:function(a,b,c,d,e){var f=this,g=new Element("div",{html:d}),h=!!g.getElement(".sticky");Signal.comments.created.dispatch({comment:g,is_sticky:h}),f.comment_form.reset(),f.comment_form_validator.reset()},onAddCommentFailure:function(a){var b=this;Signal.comments.action_failed.dispatch({xhr:a,form:b.comment_form})},onCommentToggleClick:function(a){var b=this;a.preventDefault(),b.open(),Signal.comments.tool.opened.dispatch({module:b})},onCommentGuidelinesToggleClick:function(a){a.preventDefault(),this.comment_guidelines.toggle()},onCommentCodeToggleClick:function(a){a.preventDefault(),this.comment_code.toggle(),this.comment_code_toggle.toggle(),this.comment_code_text.focus()},onCommentMacrosChange:function(a){var b=this,c=b.comment_macros.get("value"),d=b.comment_text.get("value");d&&c?d+="\n\n"+c:c&&(d=c),b.comment_text.set("value",d)},close:function(){var a=this;a.comment_container.addClass("hide"),a.comment_toggle.removeClass("hide")},open:function(){var a=this;a.comment_container.removeClass("hide"),a.comment_toggle.addClass("hide")},destroy:function(){var a=this;a.comment_toggle&&a.comment_toggle.removeEvent("click",a.bound_events.comment_toggle_click),a.comment_guidelines_toggle&&a.comment_guidelines_toggle.removeEvent("click",a.bound_events.guideline_toggle_click),a.comment_code_toggle&&a.comment_code_toggle.removeEvent("click",a.bound_events.comment_toggle_click),a.comment_macros&&a.comment_macros.removeEvent("change",a.bound_events.comment_macros_change)}});window.CommentCreator=a}(),function(){"use strict";var a=new Class({next_page:1,initialize:function(){var a=this;a.createElements(),a.exit_preview_container?(a.createRequests(),a.attachEvents()):a.next_page=null},createElements:function(){var a=this;a.comments=$$(".js-comments_container")[0],a.exit_preview_container=$$(".js-exit_preview_container")[0],a.exit_preview_trigger=$$(".js-exit_preview_trigger")[0],a.loading=$$(".js-loading")[0]},createRequests:function(){var a=this;a.show_first_page=new Request.HTML({url:location.href,method:"get",update:a.comments,onSuccess:a.onShowFirstPage.bind(a)}),a.get_next_page=new Request.HTML({url:location.href,method:"get",onSuccess:a.onGetNextPageSuccess.bind(a),onRequest:a.onGetNextPageRequest.bind(a)})},attachEvents:function(){var a=this;a.bound_events={exit_preview_trigger_click:a.onExitPreviewModeClick.bind(a),get_next_page_click:a.onGetNextPageClick.bind(a),comment_page_appended:a.onCommentPageAppended.bind(a)},a.exit_preview_trigger&&a.exit_preview_trigger.addEvent("click",a.bound_events.exit_preview_trigger_click),a.comments&&a.comments.addEvent("click:relay(.js-get_next_page)",a.bound_events.get_next_page_click),Signal.comments.page_appended.add(a.bound_events.comment_page_appended)},hideLoadingGif:function(){var a=this,b=a.loading,c=a.comments.getElement(".js-get_next_page");b&&b.hide(),c&&c.show()},showLoadingGif:function(){var a=this,b=a.loading,c=a.comments.getElement(".js-get_next_page");b&&b.show(),c&&c.hide()},sendFirstPageRequest:function(){this.show_first_page.send({data:{action:"comments",page:1}})},sendNextPageRequest:function(a){this.get_next_page.send({data:{action:"comments",page:a}})},onShowFirstPage:function(){Signal.comments.reset.dispatch({}),this.onCommentPageAppended()},onGetNextPageSuccess:function(a,b,c,d){var e=this,f=Elements.from(c);Signal.comments.paged.dispatch({elements:f,html:c}),e.hideLoadingGif()},onGetNextPageRequest:function(){this.showLoadingGif()},onExitPreviewModeClick:function(a){var b=this;b.sendFirstPageRequest(),b.exit_preview_container.addClass("loading")},onGetNextPageClick:function(a,b){var c=this;return b.hasClass("disabled")?!1:void c.sendNextPageRequest(b.get("data-page"))},onCommentPageAppended:function(){var a=this,b=a.comments.getElement(".js-get_next_page");b&&b.get("data-page")!==a.next_page?a.next_page=b.get("data-page"):a.next_page=null},getNextPage:function(){var a=this;return null===a.next_page?!1:(1===a.next_page?a.sendFirstPageRequest():a.sendNextPageRequest(a.next_page),!0)},destroy:function(){var a=this;a.bound_events&&(a.show_first_page.disable(),a.get_next_page.disable(),a.exit_preview_trigger&&a.exit_preview_trigger.removeEvent("click",a.bound_events.exit_preview_trigger_click),a.comments&&a.comments.removeEvent("click:relay(.js-get_next_page)",a.bound_events.get_next_page_click),Signal.comments.page_appended.remove(a.bound_events.comment_page_appended))}});window.CommentPager=a}(),function(){"use strict";var a=new Class({COMMENT_REGEX:/comment_[0-9]+/,searching:!1,initialize:function(){var a=this;a.createElements(),a.attachEvents()},createElements:function(){var a=this,b=document.location.hash;b&&b.match(a.COMMENT_REGEX)&&(a.comment_id=b.match(a.COMMENT_REGEX)[0].replace("#",""),a.searching=!0),a.comment_pager=new CommentPager},attachEvents:function(){var a=this;a.bound_events={comments_loaded:a.onCommentsLoaded.bind(a)},Signal.comments.loaded.add(a.bound_events.comments_loaded)},onCommentsLoaded:function(){var a=this;a.comment_id&&a.searching&&a.find(a.comment_id)},find:function(a){var b=this,c=$(a);c?(Signal.comments.found.dispatch({comment:c}),b.searching=!1):b.comment_pager.getNextPage()?b.searching=!0:b.searching=!1},destroy:function(){var a=this;Signal.comments.loaded.remove(a.bound_events.comments_loaded),a.comment_pager.destroy()}});window.CommentSearch=a}(),function(){"use strict";var a=new Class({initialize:function(a){var b=this;b.createElements(a),b.attachEvents()},createElements:function(a){var b=this;b.reply=a,b.reply_toggle=b.reply.getElement(".reply"),b.reply_form_container=b.reply.getElement(".js-form_container"),b.parent_comment_id=b.reply.get("data-parent-id").replace("comment_",""),b.reply_form=new CommentForm({action:"reply",comment_id:b.parent_comment_id,container:b.reply_form_container})},attachEvents:function(){var a=this;a.bound_events={reply_click:a.onReplyToggleClick.bind(a),form_submitted:a.onReplyFormSuccess.bind(a),cancel_click:a.onReplyCancelClick.bind(a)},a.reply_toggle&&(a.reply_toggle.addEvent("click",a.bound_events.reply_click),a.reply_form_container.addEvent("click:relay(.cancel)",a.bound_events.cancel_click)),Signal.comments.form_submitted.add(a.bound_events.form_submitted)},onReplyToggleClick:function(){var a=this;a.reply_form_container.isDisplayed()?(a.reply_form.close(),Signal.comments.tool.closed.dispatch({})):(a.reply_form.open(),Signal.comments.tool.opened.dispatch({module:a}))},onReplyCancelClick:function(a){Signal.comments.tool.closed.dispatch({})},onReplyFormSuccess:function(a){var b=this;a.comment_id===b.parent_comment_id&&"reply"===a.action&&(Signal.comments.replied.dispatch({reply:a.elements,parent_id:b.reply.get("data-parent-id")}),b.close())},destroy:function(){var a=this;a.reply_toggle&&(a.reply_toggle.removeEvent("click",a.onReplyToggleClick.bind(a)),a.reply_form_container.removeEvent("click:relay(.cancel)",a.bound_events.cancel_click)),Signal.comments.form_submitted.remove(a.bound_events.form_submitted)},close:function(){this.reply_form.close(),Signal.comments.tool.closed.dispatch({})}});window.CommentReply=a}(),function(){"use strict";var a=new Class({initialize:function(){var a=this;a.createElements(),a.attachEvents()},createElements:function(){var a=this;a.comment_list=$$(".js-comment_list")[0],a.comment_form=$$(".js-new_comment_form")[0],a.comment_count=$$(".js-comment_count")[0],a.sticky_comments=$$(".js-sticky_comments")[0]},attachEvents:function(){var a=this;a.bound_events={comment_created:a.onCommentCreated.bind(a),comment_replied:a.onCommentReplied.bind(a),comment_deleted:a.onCommentDeleted.bind(a),comment_paged:a.onCommentPaged.bind(a),comment_found:a.onCommentFound.bind(a),comment_spammed:a.onCommentSpammed.bind(a)},Signal.comments.created.add(a.bound_events.comment_created),Signal.comments.replied.add(a.bound_events.comment_replied),Signal.comments.deleted.add(a.bound_events.comment_deleted),Signal.comments.paged.add(a.bound_events.comment_paged),Signal.comments.found.add(a.bound_events.comment_found),Signal.comments.spammed.add(a.bound_events.comment_spammed)},getTranslatedCountText:function(a){return Copy.translate("count_comments",1!==a,{COUNT:a})},destroyCommentElements:function(a,b){var c=a;a.hasClass("reply")||a.hasClass("sticky")||(c=new Element("article",{"class":"main"}).surround(b)),c.get("dissolve").chain(function(){this.destroy()}.bind(c)).dissolve()},updateCommentCount:function(a){var b,c=this;c.comment_count&&(b=c.comment_count.getElement(".js-counter"),b?b.set("text",c.getTranslatedCountText(b.get("text").toInt()+a)):c.comment_count.set("html",'<span id="count" class="js-counter">'+c.getTranslatedCountText(1)+"</span>"))},injectComment:function(a){var b=this,c=a.getElements(".js-comment_element");return c.inject(b.comment_form,"before").setStyle("opacity",0).set("tween",{duration:250}).fade(1),$(c[0].get("id"))},injectStickyComment:function(a){var b=this,c=a.getElements(".js-comment_element");return c.inject(b.sticky_comments,"bottom").setStyle("opacity",0).set("tween",{duration:250}).fade(1),Global.scroll.toTop(),b.sticky_comments.getParent().addClass("stickies_here"),$(c[0].get("id"))},injectReply:function(a,b){var c=this,d=new Element("div",{html:a}).getElement(".js-comment_element"),e=$$("."+b).pop();return c.comment_list.insertBefore(d,e).setStyle("opacity",0).set("tween",{duration:250}).fade(1),$(d.get("id"))},injectPage:function(a,b){var c=$("pagination");c&&(a[0].hasClass("reply")&&c.getPrevious().hasClass("reply_form")&&c.getPrevious().destroy(),a.inject(c,"before"),c.destroy())},onCommentCreated:function(a){var b,c=this,d=a.is_sticky;b=d?c.injectStickyComment(a.comment):c.injectComment(a.comment),c.updateCommentCount(1),Signal.comments.appended.dispatch({comment:b})},onCommentReplied:function(a){var b=this,c=b.injectReply(a.reply,a.parent_id);b.updateCommentCount(1),Signal.comments.appended.dispatch({comment:c})},onCommentDeleted:function(a){var b=this,c=a.comment,d=$$("."+c.get("id")),e=d.length>0?-(d.length-1):-1;b.updateCommentCount(e),b.destroyCommentElements(c,d)},onCommentSpammed:function(a){var b=a.comment;b.getElement(".js-spam_trigger").set("html","Marked as Spam").set("disabled",!0)},onCommentPaged:function(a){this.injectPage(a.elements,a.html),Signal.comments.page_appended.dispatch()},onCommentFound:function(a){Global.smoothScroll(a.comment)},destroy:function(){var a=this;Signal.comments.created.remove(a.bound_events.comment_created),Signal.comments.replied.remove(a.bound_events.comment_replied),Signal.comments.deleted.remove(a.bound_events.comment_deleted),Signal.comments.paged.remove(a.bound_events.comment_paged),Signal.comments.found.remove(a.bound_events.comment_found)}});window.CommentList=a}(),function(){"use strict";var a=new Class({comments:{},replies:{},initialize:function(){var a=this;a.createElements(),a.attachEvents(),Signal.comments.loaded.dispatch()},createElements:function(){var a=this;a.comment_elements=$$(".js-comment"),a.reply_elements=$$(".js-comment_reply"),a.comment_form=$$(".js-new_comment_form")[0],a.comment_search=new CommentSearch,a.comment_list=new CommentList,a.createComments(),a.createReplies(),a.comment_form&&(a.comment_creator=new CommentCreator(a.comment_form))},attachEvents:function(){var a=this;a.bound_events={comments_reset:a.onCommentsReset.bind(a),comment_appended:a.onCommentAppended.bind(a),comment_deleted:a.onCommentDeleted.bind(a),comment_action_failed:a.onCommentActionFailed.bind(a),tool_opened:a.onToolOpened.bind(a),tool_closed:a.onToolClosed.bind(a),page_appended:a.onCommentPageAppended.bind(a)},Signal.comments.reset.add(a.bound_events.comments_reset),Signal.comments.appended.add(a.bound_events.comment_appended),Signal.comments.deleted.add(a.bound_events.comment_deleted),Signal.comments.action_failed.add(a.bound_events.comment_action_failed),Signal.comments.tool.opened.add(a.bound_events.tool_opened),Signal.comments.tool.closed.add(a.bound_events.tool_closed),Signal.comments.page_appended.add(a.bound_events.page_appended)},createComments:function(){var a=this;a.comment_elements.each(function(b){"undefined"!=typeof ModComment?a.comments[b.get("id")]=new ModComment(b):a.comments[b.get("id")]=new Comment(b)})},createReplies:function(){var a=this;a.reply_elements.each(function(b){a.replies[b.get("data-parent-id")]=new CommentReply(b)})},destroyComment:function(a){var b=this,c=a.get("id");b.comments[c]&&b.comments[c].destroy()},destroyCollection:function(a){var b;for(b in a)a.hasOwnProperty(b)&&a[b].destroy()},closeCollection:function(a,b){var c;for(c in a)a[c]!==b&&a[c].close()},onCommentAppended:function(a){var b=this,c=a.comment,d=c.get("id"),e=$$('[data-parent-id="'+d+'"]')[0];b.comments[d]=new Comment(c),e&&(b.replies[d]=new CommentReply(e)),"undefined"!=typeof Rainbow&&Rainbow.color()},onCommentDeleted:function(a){var b=this,c=a.comment,d=$$("."+c.get("id")),e=b.replies[c.get("id")];e&&e.destroy(),b.destroyComment(c),d.each(function(a){b.destroyComment(a)})},onCommentActionFailed:function(a){var b,c,d=JSON.decode(a.xhr.responseText);if(403===a.xhr.status)alert(Copy.dict.no_comments_for_you);else for(b in d)d.hasOwnProperty(b)&&(c=a.form.getElement(":input[name="+b+"]"),c&&c.addClass("validation-failed"))},onToolOpened:function(a){var b=this,c=a.module;b.comments&&b.closeCollection(b.comments,c),b.replies&&b.closeCollection(b.replies,c),b.comment_creator&&c!==b.comment_creator&&b.comment_creator.close()},onToolClosed:function(){var a=this;a.comment_creator&&a.comment_creator.open()},onCommentsReset:function(a){var b=this;b.refresh(),Signal.comments.loaded.dispatch()},onCommentPageAppended:function(){var a=this;a.destroyCollection(a.replies),a.destroyCollection(a.comments),a.comment_elements=$$(".js-comment"),a.reply_elements=$$(".js-comment_reply"),a.createComments(),a.createReplies(),Signal.comments.loaded.dispatch()},destroy:function(){var a=this;Signal.comments.reset.remove(a.bound_events.comments_reset),Signal.comments.appended.remove(a.bound_events.comment_appended),Signal.comments.deleted.remove(a.bound_events.comment_deleted),Signal.comments.action_failed.remove(a.bound_events.comment_action_failed),Signal.comments.tool.opened.remove(a.bound_events.tool_opened),Signal.comments.tool.closed.remove(a.bound_events.tool_closed),Signal.comments.page_appended.remove(a.bound_events.page_appended),a.comment_search.destroy(),a.comment_list.destroy(),a.destroyCollection(a.comments),a.destroyCollection(a.replies),a.comment_creator&&a.comment_creator.destroy()},refresh:function(){var a=this;a.comment_list.destroy(),a.comment_creator.destroy(),a.destroyCollection(a.replies),a.destroyCollection(a.comments),a.comment_elements=$$(".js-comment"),a.reply_elements=$$(".js-comment_reply"),a.comment_form=$$(".js-new_comment_form")[0],a.createComments(),a.createReplies(),a.comment_list=new CommentList,a.comment_creator=new CommentCreator(a.comment_form)}});window.CommentController=a}(),$(window).addEvent("domready",function(){var a=function(){window.comment_controller&&window.comment_controller.destroy(),window.comment_controller=new CommentController};Signal.clip.extras.loaded.add(a),Signal.channel.load_comments.add(a),a()});